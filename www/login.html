<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Fastmate - ë¡œê·¸ì¸</title>
    
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">

    <link rel="stylesheet" href="./styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">



    <style>
        /* login.html ì „ìš© ìŠ¤íƒ€ì¼ */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
            font-family: 'Noto Sans KR', sans-serif;
        }
        .login-container {
            width: 100%;
            max-width: 400px;
            padding: 40px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            box-sizing: border-box;
            margin: 20px;
        }
        .login-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1c8e3e;
            margin: 0 0 15px 0;
        }
        .login-subtitle {
            font-size: 1rem;
            color: #777;
            margin: 0 0 30px 0;
        }
        .input-group {
            text-align: left;
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        .login-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background-color: #1c8e3e;
            color: white;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 10px;
        }
        .forgot-password {
            display: block;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #555;
            text-decoration: none;
        }
        .forgot-password:hover {
            text-decoration: underline;
        }
        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            color: #aaa;
            margin: 30px 0;
        }
        .divider::before, .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #e0e0e0;
        }
        .divider:not(:empty)::before { margin-right: .5em; }
        .divider:not(:empty)::after { margin-left: .5em; }
        .google-login-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            width: 100%;
            padding: 12px 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #ffffff;
            font-size: 1rem;
            font-weight: 500;
            color: #333;
            cursor: pointer;
        }
        .google-login-btn svg { width: 20px; height: 20px; }
    </style>
</head>
<body>

    <div class="login-container">
        <h2>ë¡œê·¸ì¸</h2>
        <div class="input-group">
            <input type="email" id="email" placeholder="ì´ë©”ì¼ ì£¼ì†Œ">
        </div>
        <div class="input-group">
            <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
        </div>
        <button id="emailLoginBtn" class="main-button">ë¡œê·¸ì¸</button>
        <p class="divider">ë˜ëŠ”</p>
        <button id="googleLoginBtn" class="social-button google">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/800px-Google_%22G%22_logo.svg.png" alt="Google">
            Googleë¡œ ë¡œê·¸ì¸
        </button>
        <button id="kakaoLoginBtn" class="social-button kakao">
            <!-- ì¹´ì¹´ì˜¤ ì´ë¯¸ì§€ URL ìˆ˜ì • -->
            <img src="https://upload.wikimedia.org/wikipedia/commons/e/e3/KakaoTalk_logo.svg" alt="Kakao">
            ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸
        </button>
        <p class="signup-link">ê³„ì •ì´ ì—†ë‹¤ë©´ <a href="./signup.html">íšŒì›ê°€ì…í•˜ê¸°</a></p>
      </div>
      <!-- ì¤€ë¹„ì¤‘ ëª¨ë‹¬ -->
<div id="prepareModal" class="modal" style="display:none; position:fixed; inset:0; z-index:9999; background:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
  <div style="background:white; padding:24px; border-radius:12px; text-align:center; max-width:300px; margin:20px;">
    <p style="margin:0 0 16px; font-size:1.1rem;">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤ ğŸ™</p>
    <button id="closePrepareModal" style="padding:10px 24px; background:#1c8e3e; color:white; border:none; border-radius:8px; font-weight:bold; cursor:pointer;">í™•ì¸</button>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script defer src="/firebase-init.js?v=2025.09.06-v8"></script>

        
<script>
document.addEventListener('DOMContentLoaded', () => {
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const emailLoginBtn = document.getElementById('emailLoginBtn');
    const googleLoginBtn = document.getElementById('googleLoginBtn');
    const kakaoLoginBtn = document.getElementById('kakaoLoginBtn');

    // ========================================
    // ì´ë¯¸ ë¡œê·¸ì¸ ìƒíƒœë©´ fastmateë¡œ ì´ë™
    // ========================================
    let redirected = false;
    auth.onAuthStateChanged((user) => {
        if (user && !redirected) {
            redirected = true;
            window.location.href = './fastmate.html';
        }
    });

    // ========================================
    // ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸
    // ========================================
    emailLoginBtn?.addEventListener('click', async () => {
        const email = (emailInput?.value || '').trim();
        const password = passwordInput?.value || '';

        if (!email || !password) {
            showModal('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        emailLoginBtn.disabled = true;
        try {
            await auth.signInWithEmailAndPassword(email, password);
        } catch (e) {
            console.error(e);
            let msg = 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
            if (e.code === 'auth/user-not-found') {
                msg = 'ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.';
            } else if (e.code === 'auth/wrong-password') {
                msg = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
            } else if (e.code === 'auth/invalid-email') {
                msg = 'ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
            } else if (e.code === 'auth/too-many-requests') {
                msg = 'ë¡œê·¸ì¸ ì‹œë„ê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
            }
            showModal(msg);
        } finally {
            emailLoginBtn.disabled = false;
        }
    });

    // Enter í‚¤ë¡œ ë¡œê·¸ì¸
    passwordInput?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            emailLoginBtn?.click();
        }
    });

    // ========================================
    // êµ¬ê¸€ ë¡œê·¸ì¸
    // ========================================
    googleLoginBtn?.addEventListener('click', async () => {
        if (googleLoginBtn.disabled) return;
        googleLoginBtn.disabled = true;

        try {
            const user = await signInWithGoogle();
            if (!user) {
                console.log('Google ë¡œê·¸ì¸: íŒì—… ë‹«í˜ ë˜ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ ì§„í–‰ ì¤‘');
            }
        } catch (e) {
            console.error(e);
            showModal(e.message || 'Google ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        } finally {
            googleLoginBtn.disabled = false;
        }
    });

    // ========================================
    // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (ì¤€ë¹„ì¤‘)
    // ========================================
    kakaoLoginBtn?.addEventListener('click', () => {
        showModal('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤ ğŸ™');
    });

    // ========================================
    // ëª¨ë‹¬ í•¨ìˆ˜
    // ========================================
    function showModal(message) {
        const modal = document.getElementById('alertModal');
        const msgEl = document.getElementById('alertModalMessage');
        if (modal && msgEl) {
            msgEl.textContent = message;
            modal.style.display = 'flex';
        }
    }

    // ëª¨ë‹¬ ë‹«ê¸°
    document.getElementById('closeAlertModal')?.addEventListener('click', () => {
        document.getElementById('alertModal').style.display = 'none';
    });

    // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
    document.getElementById('alertModal')?.addEventListener('click', (e) => {
        if (e.target.id === 'alertModal') {
            e.target.style.display = 'none';
        }
    });
});
</script>
</body> 
</html>